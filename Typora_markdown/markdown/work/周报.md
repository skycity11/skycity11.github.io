## 6.18

### S6P

1. AI arch更改/change list填写

2. AI ME/DV问题支持

3. AI clk plan填写，dvfs表格填写，代码集成

4. Npu先进技术架构预研项目代码集成

a)  Firewall删除

b)  相关寄存器删除

c)  Matrix regen –ongoing

 

### S6

1. Npu调度测试，代码集成done，rtlchecker ongoing

2. AI后仿case review
   1. 需要增加npu/vdsp在跑用例时动态切频的case
   2. Dvfs sw case需要tba环境，不考虑添加case

### S6P

AI DV支持—vdsp inst read only环境约束

AI ME支持

1. Matrix需要slice（同s6），需regen
2. Tower内部有vio
3. 高频u2p在me阶段暂无问题

Vau r1p3代码拷贝到本地，更改module/filename

 

## 6.25

### S6

1. Ntc list check

2. DV 后仿动态降频，搭建case支持


### S6P

1. Tower id修改导致ai sys的异步桥/cfg mtx/main mtx重新生成，集成--ongoing

2. 准备pre0.5 tag for ME，预计周四打tag（等matrix修改完毕）

3. Ase controller增加chain数量，rtl/sepc改动—50%




## 7.1

### S6

1. Sys boundary no timing      arc检查

2. Master clock block      check report检查

3. Ase 6A后仿支持，K6支持


### S6P

1. NPU 0.5 质量过点交付件review

2. Release DE_ai_sys_0009_nupf_comp_goodcode for ME&DV
   1. Matrix/asb等修改
   2. Lint/sdc/clp Rtlchecker clean
   3. Genusdft 新增drc_check ongoing，cdc check ongoing

3. Ai pcie讨论会议，梳理ai改动项
   1. Ai main mtx新增s3直连pcie
   1. Pcie访问npu有低延时需求，top2sys asb改为高频时钟，删除asb2fw asb
   1. Pcie访问ocm有低延时需求，cfg mtx s3—main mtx m4改为高频时钟


4. wfifo场景梳理总结，已整理出对比场景，正在梳理总结--70%



## 7.9

### S6

1. ase s6后仿，lib自激振荡的时钟频率和前仿频率有差距，需要更改case环境

2. flat cdc –50%

3. change list软件需求填写完整

4. npu_test代码支持，文档支持

5. STC clkcfg list修改填写


### S6Pro

1. memory low power需求list填写

2. 中断 list填写

3. Vdsp进版，port口变动导致代码修改，mtx重新生成

4. DV支持：clk plan填写确认，clk_glue中sel_ac逻辑修改

5. ME支持：U2P存在min period问题，目前和ME商量放松约束看是否能收敛


### 7.9周报跟踪

1. Tower确认为832×512，在asni中转
2. 需求原因：为了NPU或DSP单独推理时的功耗节省
3. 不建议加的原因：
4. ROC1中imagination AI和寒武纪AI，两个模块内置PowerSwitch，当TO后测试时，关闭寒武纪AI psw时，imagination AI出现大比例卷积运算fail
5. 为了NPU或DSP单独推理时的功耗节省
7. 7.8进展：fangxuan 回复正在评估需求



> 结构为在cgm_divn_ctype_scfg中的mux2_1
>
> in1为aux_clk_muxed，sdc约在1024M，
>
> in2为axu_clk_div，为aux_clk_muxed 16分频的时钟，sdc约在64M，
>
> 该设计的目的是将apll的高频时钟拉到IO观测，所以分频到100M以下
>
> 脚本报出问题在于看到路径上有高频时钟和低频时钟mux，但是约束下在低频时钟，就会报出高频被低频挡住的问题
>
> 实际上约束是应该在低频上，至于为何和高频mux是由于debug，万一cgm_div实现有问题，可以看高频是否是好的
>



### 8.6

### S6

1. flat cdc –本地已清理完毕
2. change list软件需求填写完整
3. ip后仿问题支持rst
4. S6Pro
5. ai low power arch更新
6. ai clock & rst      arch梳理并更新—80%
7. changelist review及aciton追踪
8. matrix的write outstanding是否能够达到要求—ddr扩容为cmdq，读写ost不变
9. 0.5 cdc/genusdft clear

 

 

## 7.16

### S6P

 

ai pre0.5 发布      DE_ai_sys_0010_nupf_comp_goodcode

1. vdsp0.5进版，接口变动
2. matrix集成
3. dv bug修改
4. lint/sdc/genusdft/clp clear

ai changelist & 中断list更新

ai pr & dv支持

ai中断冗余需求确认

ai pcie需求以及改动确认，下版合入

 

### S6

  

ai 功耗会议review

top flatten cdc清理 90%，剩余100条左右error

clk group 确认

 

1.vdec 功耗会议，遗留action分析中 --ongoing

2.top flatten cdc清理：剩余apb2apb相关error – ongoing

 

### 7.23

### S6P：

  

ai sys pcie需求合入，matrix集成done，ocm高频通道hold

ai_clk_glue核对检查 done

0.5 rtlchecker      cdc/genusdft/etc/erc--ongoing

 

### S6：

S6 ai rtl质量检查review

后仿问题跟踪

1. Axi的addr，低5bit会优化（unconnected）导致地址传输错误——ME正对比lec
2. Vdsp slv_d的aw握手不成功，clk delay大于awvalid delay所致——dv更新环境，删除slv_d的vip
3. Tracker_busy有x态，hold不满足所致，pulse是npu bfm发出的bready——dv确认问题中

 

## 7.30

 

### S6：

  

后仿问题确认：uniclk&clk_core内部没有rst同步模块，需要规范软件对ai sys软复位行为——重跑后pass

Stc 确认 R24-01-02 check list确认

Flat Sdc本地基本waive完毕

### S6P：

 

ME 问题支持：Mem floating pin确认——mem addr连线修改

地址回绕问题检查：无问题

Change list填写，准备review

 

## 8.11

 

### S6：

  

Flac cdc 其余清完 conv ongoing

后仿问题，timing violation——上下电pll和rst配置更改

 

### S6P:

  

S6P NPU+VDSP加PowerSwitch 实验结果讨论

1. 预计SYS内增加power switch后，IR可能会恶化1.5%到2.5%，可能需要在额外抬压50mV到0.90V才能改善IR问题
2. 确定不加入powerswitch，发会议纪要

与PR沟通timing vio问题

1. vau相关的aw/ar通路是否能优化，不插slice
   1. 将vau位置上挪后（加region），vdsp2vau得到改善，但是vau2mtx 违例增加到0.13
   2. 确认要加slice，计划插在matrix m1&m3口
2. cfg_s2 -> vdsp       suboridinate也存在timing问题,约0.17
   1. S6上没有问题是因为会在axi_id_comp中打拍，S6P删除了该模块，路径变长
   2. 确认要加slice，计划直接将regslice_mtx2vdsp改成打拍模式
3. OCM收敛问题
   1. 与PR沟通fp，更改OCM摆放，可以将单侧的memory vio基本收干净
   2. 由于OCM在fp上分在两边，如果endpoint放在中间，会导致边缘OCM路径过长，较难收敛，所以计划将OCM分为两块，挂在mtx两个slv下，这样endpoint可以放在两边，改善vio

 

## 8.20

 

### S6：

  

Flac cdc conv 清完

ase后仿数据对比错误问题——golden有误，计算golden时环境抓取ring的振荡时钟的时间有误，需要等20个cycle稳定后再抓取，修改后pass

ase后仿timing violation问题——ring振荡的时钟和其gate未作同步导致时钟关闭时有毛刺，其关闭时已没有使用，不会影响可waive

 

### S6P:

  

准备tag for ME/PR

1. Matrix新增2个slice，mtx2vdsp regslice使能打拍——done
2. Matrix新增ocm_1通路，重新生成ocm_0/ocm_1——done
3. Mem_fw进版，分成两个通路对应ocm_0/1——done
4. Rtlchecker sdc/upf——done，cdc/erc——ongoing

Ai uniclk与ip沟通，初步结论预计删除clk_core内部的vdsp_uni_clock

N02相关问题支持

 

## 8.27

 

### S6：

  

更新sdf之后的后仿vio确认——mtx的avalid信号被异步复位，出现x态，但mtx内部处理后没有传递给下游，waive

NPU调度测试项目支持，代码bug修改

K6 aging sensor问题支持

 

### S6P：

  

Release DE_ai_sys_0019_nupf_comp_goodcode for ME&DV      as Pre0.5——以解决timing问题

Debug bus list整理，表格梳理

新tag ME/PR问题支持——tdc sensor新增port，del seq新增确认，PR摆放建议

新tag DV 问题支持，fix bug

Power arch review

 

 

 

 

## 9.3

### S6

  

基于S6项目为PBS修改ai sys

1. 删除tower，将main_mtx s0接到top –done
2. Rtlchecker –ongoing

 

### S6P：

  

OCM PR反馈timing 100ps slack ———拆分为更小粒度

Ai2pcie通路

1. 新增Matrix s口+异步桥 —— ongoing

AI SYS文档修改

 

## 9.10

### S6

  

L8：基于S6为PBS修改ai sys——done，tag release

S6后仿

1. Rst case回归case fail；原因：vau 软复位让arvalid异步复位，导致下游mtx的arvalid撞上时钟上升沿出现setup问题；分析：Rst case本身构造时不希望出现传输，该传输是由于vdsp解复位会自动去ddr捞页表，可以通过拉住runstall去阻止vdsp传输；解决：修改case环境force runstall后test pass
2. 第二轮回归timing vio检查 –done

### S6P

  

PR timing沟通，设计修改

1. Vdsp2mtx加了regslice后已无问题
2. OCM 分开后仍有150ps，尝试两种方法
   1. 采用partial blkg，使memory channel间能摆放逻辑和寄存器，通过这种方法可以将vio收到20ps，但是partial会导致channel里的cel density过于密集，会导致IR有很大风险，PR不建议
   2. 尝试更快的sram，与PR沟通后由RA1UC2048x86改为RF1HF1024x64，切分更细（3*8->4*16）Leakage增加87%，面积增加16%，预计这周发版本

Ai2pcie通路：新增Matrix s口+异步桥 —— done

Cacheable方案会议讨论

1. Action：增加npu/vdsp_mstd/vdsp_idma       decode逻辑

 

 

## 9.17

 

1. AI实验室技术开发项目，可配置算力ai sys

a)  了解sys架构和改动需求

b)  列举改动点准备进一步详细沟通

2. S6 后仿安全复位case，环境修改，已pass

3. S6P AI2PCIE方案细节确认

a)  Rc+3ep连接，主从访问通过配置通路访问，不需要中断

b)  Mailbox需加入3个ep端channel

c)  Ai2pcie采用axi4

4. Tower进版相关改动，release tag21 for dv

5. OCM sram替换，release tag22 for me

6. N02相关问题支持

 

 

 

## 9.24

### S6

  

S6 后仿问题追踪

1. 第三轮后仿sys侧check无异常
2. Npu rst生效产生vio——ongoing

S6 DVR2验证review

### S6P

  

AI2PCIE方案确认

1. Mailbox sram/fifo       depth评估
2. Pcie可替代mailbox方案讨论

AI OCM换sram lib后综合PPA反馈，area 增加6.79%，leak 增加20.92%

Sys 0.5准备——lint/sdc/etc/dft clear，cdc/erc ongoing

ME问题反馈——apb_transmon中ptest undriven，mtx版本替换

 

## 10.15

 

1. Ai sys npu/vdsp ip进版，对应upf修改，rtlchecker清理——正式0.5版本

2. Vdsp增加itcm后导致decode地址变化，梳理场景，与dv沟通约束环境

3. Release 0.5 tag DE_ai_sys_0029_cq_goodcode

4. Ai sys changelist修改

5. Ai sys 0.5 checklist填写

6. Vdsp blk PR无法保证收敛1.2G，讨论backup方案，pll 2.5分频出988M单独拉给vdsp——前期未投入，预计大概12月有结果

7. 梳理npu在s6p上的改动点：mac数量变化/内部buf变化/频点1->1.2G/量化相关变化

 

## 10.22

 

  

1. 基于tag09版本替换S家SRAM，包括NPU IP内部RAM和OCM

2. 更新clock_arch和power_arch，准备sdc/upf 0.5 review

3. ME反馈IO path timing      violation，主要为tower和async相关in2out。

4. 1. 因AI频率提升至1235M，现有max delay约束过紧
   2. 计算后放松max delay至1.83（对应sys内留0.43周期）
   3. 计划暂不开ELVT，后续在0p5 STA阶段观察pr timing情况

5. Bitfile需求review

6. Pcie方案沟通

7. 1. 0.5后可能需要开一个port接收pcie dma的中断。由于Vdsp内部为4通道dma，本身占据两通道，如需要其他业务可能会用到pcie的dma
   2. Pcie ost为16/16，ai侧目前为32/64，由于下游瓶颈考虑减小上游ost参数




## 10.29

  

1. AI PR问题支持

2. 1. Ocm到mbist的GO_ID_REG路径有71ps违例
      1. Root cause：fan in点太多，工具摆放在所有fan in点中间
      2. Solution：将ocm的mbist controller单独拆出来
   2. Npu cbuf ram到mbist的GO_ID_REG路径有19ps违例
      1. Root cause: Floor        plan路径不长，但有绕线，因为channel加了soft blk，只能放buf/inv
      2. Solution: PR尝试partial blk

3. AI 验证问题支持

4. 1. Ai2pcie异步桥clk连线bug fix
   2. Dvfs ipa的en默认值为1导致配index受限，需改为0
   3. Dvfs的反压信号未接到配置时钟的cgm_en
   4. Clk gui无法生成ai_sys_clk_max_cfg.sv，需要手改

5. AI ME问题支持

6. 1. Bist low speed的mux cell有问题，影响ai和vdsp的bist低速测试
      1. Root cause：S6 有erc问题，将cgm_mux将clk_mux（应换成ckmux），clk_mux比原有逻辑多了一路occ_bypass作为sel，该信号为1时会切到clk_scan_ate，后者不是外部低速时钟，会影响npu/vdsp在低速下binning
      2. Solution：S6 PLL可通过叠fdma和post div做到75M，S6P替换ckmux cell

7. NPU先进技术架构技术演进V2.0项目支持，low power方案讨论




> S6 AI加fifo：
>
> 加fifo原因：vdsp的AW需要vau做重映射，miss概率高导致delay较大，W通道在下游mtx中只能存2拍，又由于AW和W通道的堆栈pop信号为同一个信号，使得在上一笔AW没有发完时无法发出下一笔W，导致AW阻塞W通道，总线上出现大量WREADY与AWREADY拉低情况
>

 

## 11.5

1. 重发0.5版本，DE_ai_sys_0031_cq_goodcode for syn，由于tag29中ai2pcie clk连错为低频时钟影响综合

2. occ freq表格填写

3. feature list反标填写，ip & soc

4. checklist填写，准备过点

5. DV问题支持

6. s6 vdsp加fifo文档梳理

 

## 11.12

1. AI SYS基于正式0.5版本替换Synopsys库SRAM，更新vc、sdc、upf等，发布版本

2. ASE controller代码修改，更新PENY和SE之间的时序关系

3. reset arch绘制，梳理soft reset & safe reset逻辑

4. device spec需要的寄存器生成，device spec 书写ongoing

5. ai sys rtl0.5阶段面积梳理

 

## 11.19

  

1. S6P ai 0.5 checklist 过点——pr timing未收敛完

2. S6P ai 0.5 timing问题支持
   1. Main_mtx和async_brige_ai2pcie距离过长，考虑加拍。PR建议先下multi cycle，后续0p9再加拍
   1. Ai2pcie通路加regslic，RTL修改，与洪波沟通将pcie的iso拉到ai sys作为regslice的downstream disable


3. S6P PR反馈vdsp to mtx通路同步路径过长，考虑将同步模块收入vdsp blk，并在边界加async_bridge可能性

4. S6P ai 合入npu ip      london_r3p0_09_004 tag，release sys tag for pxp仿真

5. CTS guide 修改&review

6. NPU先进技术架构技术演进V2.0项目支持，讨论多核npu的power domain设置和接口控制



## 11.26

1. vdsp sync_fifo分析
   1. idma 对比s6/s6p，时序图分析，fifo可缩减到4
   2. mstd 没有burst情况下可删除burst，场景待确认ongoing
2. ist bist mode将BistEn=Y的时钟再ist_bist模式下开启，手动修改
3. tower pre0.5 review
   1. action：补充STC，增加ai2pcie和mem_fw异步桥

4. ai2pcie 将outstanding调低至16/16，重新生成mtx
5. NPU先进技术架构技术演进V2.0项目支持，多核npu的上下电过程&upf支持
6. Release tag35，合入npu ip pre0.9，only for pxp
7. ai sys以及内部ip mem floating & IO floating确认





















